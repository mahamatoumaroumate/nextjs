# More Root

Private Folders \_folder
Route Groups (dashboard)

Dynamic Routes

[...folder] - Catch-all route segment
[[...folder]] Optional catch-all route segment (used by Clerk)
create test folder app/\_css

create app/(dashboard)/auth

the url is just '/auth'
create app/(dashboard)/auth/[sign-in]

# Prisma Sqlite

Prisma ORM is a database toolkit that simplifies database access in web applications. It allows developers to interact with databases using a type-safe and auto-generated API, making database operations easier and more secure.

Prisma server: A standalone infrastructure component sitting on top of your database.
Prisma client: An auto-generated library that connects to the Prisma server and lets you read, write and stream data in your database. It is used for data access in your applications.

npm install prisma --save-dev
npm install @prisma/client

npx prisma init

This creates a new prisma directory with your Prisma schema file and configures SQLite as your database. You're now ready to model your data and create your database with some tables.

generator client {
provider = "prisma-client-js"
}

datasource db {
provider = "sqlite"
url = env("DATABASE_URL")
}

# ADD .ENV TO .GITIGNORE !!!!

.env

# Setup instance

In development, the command next dev clears Node.js cache on run. This in turn initializes a new PrismaClient instance each time due to hot reloading that creates a connection to the database. This can quickly exhaust the database connections as each PrismaClient instance holds its own connection pool.

(Prisma Instance)[https://www.prisma.io/docs/guides/other/troubleshooting-orm/help-articles/nextjs-prisma-client-dev-practices#solution]

create utils/db.ts
import { PrismaClient } from '@prisma/client';

const prismaClientSingleton = () => {
return new PrismaClient();
};

type PrismaClientSingleton = ReturnType<typeof prismaClientSingleton>;

const globalForPrisma = globalThis as unknown as {
prisma: PrismaClientSingleton | undefined;
};

const prisma = globalForPrisma.prisma ?? prismaClientSingleton();

export default prisma;

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;

# Prisma Model

The Prisma model provided is a representation of a Task entity in the context of a database schema. Here's a detailed description of each component within this model:

model Task { ... }: This is the definition of the Task model. In Prisma, a model represents a table in the database. It serves as a blueprint for the records that will be stored in the corresponding table, defining the structure and behavior of the data.

id String @id @default(uuid()): This line defines a field named id of type String which is marked with @id, signifying that this field is the primary key of the model. The @default(uuid()) directive indicates that the default value for this field will be a UUID (Universally Unique Identifier) generated by Prisma.

content String: This line declares a field named content of type String. This field will store textual data, presumably the details or description of the task.

createdAt DateTime @default(now()): This field is named createdAt and is of type DateTime. It has a default value set to the current timestamp at the time of record creation, indicated by the @default(now()) directive.

completed Boolean @default(false): Lastly, the completed field is of type Boolean and is used to indicate whether the task has been completed. It defaults to false, meaning when a new task record is created, it is considered incomplete by default.

In Prisma, the term "model" refers to an abstraction that maps to a table in your database. Prisma models are defined in the Prisma schema, which is a declarative representation of your database's structure. Each model in the Prisma schema corresponds to a table in the database, and each field within a model corresponds to a column in that table. This schema plays a central role in Prisma's features, such as type-safe database access and migrations.

# safely applies and tracks changes to the database structure.

npx prisma migrate dev

# in a new terminal window

launch Prisma Studio, which is a visual editor for your database.
http://localhost:5555
npx prisma studio

# Optional - Prisma Crud

Prisma Docs

- Create Single Record
  const task = await prisma.task.create({
  data: {
  content: 'some task',
  },
  });
- Get All Records
  const tasks = await prisma.task.findMany();
- Get record by ID or unique identifier
  // By unique identifier
  const user = await prisma.user.findUnique({
  where: {
  email: 'elsa@prisma.io',
  },
  });

- By ID
  const task = await prisma.task.findUnique({
  where: {
  id: id,
  },
  });
- Update Record
  const updateTask = await prisma.task.update({
  where: {
  id: id,
  },
  data: {
  content: 'updated task',
  },
  });
- Update or create records
  const upsertTask = await prisma.task.upsert({
  where: {
  id: id,
  },
  update: {
  content: 'some value',
  },
  create: {
  content: 'some value',
  },
  });
- Delete a single record
  const deleteTask = await prisma.task.delete({
  where: {
  id: id,
  },
  });
